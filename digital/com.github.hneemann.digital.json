{
  "app-id": "com.github.hneemann.digital",
  "branch": "0.26",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "20.08",
  "sdk": "org.freedesktop.Sdk",
  "sdk-extensions": [
      "org.freedesktop.Sdk.Extension.openjdk"
  ],
  "command": "Digital.sh",
  "finish-args": [
      "--persist=.java",
      "--share=ipc",
      "--share=network",
      "--socket=x11",
      "--socket=wayland",
      "--filesystem=home"
  ],
  "modules": [
        {
            "name" : "openjdk",
            "buildsystem" : "simple",
            "build-commands" : [ "/usr/lib/sdk/openjdk/install.sh" ]
        },
        {
            "name": "digital-desktopintegration",
            "buildsystem": "simple",
            "build-commands": [
                "echo Building Desktop Integration",
                "install -Dm755 com.github.hneemann.digital.desktop /app/share/applications/com.github.hneemann.digital.desktop",
                "install -Dm755 com.github.hneemann.digital.png /app/share/icons/hicolor/128x128/apps/com.github.hneemann.digital.png"
            ],
            "sources": [
                {
                    "type": "file",
                    "path": "com.github.hneemann.digital.png"
                },
                {
                    "type": "file",
                    "path": "com.github.hneemann.digital.desktop"
                }
            ]
        },
        {
            "name": "digital",
            "buildsystem": "simple",
            "build-commands": [
                "echo Building Digital",
                "mkdir -p /app/bin",
                "mkdir -p /app/share/Digital",
                "install -Dm755 Digital.jar /app/bin/Digital.jar",
                "install -Dm755 Digital.sh /app/bin/Digital.sh",
                "cp -r docu /app/share/Digital",
                "cp -r examples /app/share/Digital"
            ],
            "sources" : [
                {
                    "type": "archive",
                    "url": "https://github.com/hneemann/Digital/releases/download/v0.26/Digital.zip",
                    "sha512": "2fab3fa52bb68b8650dd01f8cac5d45482b3d7ff9a0c9bda15d9e4c1a8c1a7f5f339f4029234cf8ea2449245fd1066261ecd3bfc4d7be2ca4f26c33ca941bdd6"
                },
                {
                    "type": "script",
                    "dest-filename": "Digital.sh",
                    "commands": [
                        "#!/bin/sh",
                        "export JAVA_HOME=/app/jre",
                        "export JAVA=${JAVA_HOME}/bin/java",
			"export _JAVA_OPTIONS=\"-Dawt.useSystemAAFontSettings=gasp -Dswing.aatext=true -Dsun.java2d.xrender=True -Dswing.systemlaf=javax.swing.plaf.metal.MetalLookAndFeel -Dswing.defaultlaf=javax.swing.plaf.metal.MetalLookAndFeel -Dswing.plaf.metal.controlFont=sans-bold-18 -Dswing.plaf.metal.userFont=sans-bold-18\"",
                        "${JAVA} -jar $(dirname $0)/Digital.jar"
                    ]
                }
            ]
        }
    ]
}

